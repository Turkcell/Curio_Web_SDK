var Curio=function(g,h,k){var d={ready:!1,authToken:"",visitorCode:k,apiKey:g,trackingCode:h,sessionCode:"",hitCode:"",serverUrl:document.location.protocol+"//ttech.8digits.com/api/"};d.endpoints={auth:{requestType:"POST",address:d.serverUrl+"auth"},visit:{"new":{requestType:"POST",address:d.serverUrl+"visit/create"},end:{requestType:"POST",address:d.serverUrl+"visit/end"}},event:{"new":{requestType:"POST",address:d.serverUrl+"event/create"}},hit:{"new":{requestType:"POST",address:d.serverUrl+"hit/create"},
    end:{requestType:"POST",address:d.serverUrl+"hit/end"}}};var f=function(a,c){var b=new XMLHttpRequest;"withCredentials"in b?b.open(a,c,!0):"undefined"!=typeof XDomainRequest?(b=new XDomainRequest,b.open(a,c)):b=null;return b};(function(){var a=f(d.endpoints.auth.requestType,d.endpoints.auth.address+"?apiKey="+this.apiKey);null!=a&&(a.send(),a.onload=function(){try{var c=JSON.parse(a.responseText)}catch(b){return!1}if(void 0===c.data||"object"!=typeof c.data||void 0===c.data.authToken||"string"!=typeof c.data.authToken)return!1;
    d.authToken=c.data.authToken;return d.ready=!0})})();d.newVisit=function(a,c){if(!d.ready)return c(!1),!1;if(void 0===c||"function"!=typeof c)return!1;if(void 0===a||"object"!=typeof a||void 0===a.pageTitle||"string"!=typeof a.pageTitle||1>a.pageTitle.length||void 0===a.path||"string"!=typeof a.path||1>a.path.length)return c(!1),!1;var b=d.endpoints.visit["new"].address,b=b+"?authToken="+d.authToken+"&trackingCode="+d.trackingCode,b=b+"&visitorCode="+d.visitorCode,b=b+"&pageTitle="+a.pageTitle,b=
    b+"&path="+a.path;void 0!=a.hitCode&&"string"==typeof a.hitCode&&0<a.hitCode.length&&(b=b+"&hitCode="+a.hitCode);void 0!=a.sessionCode&&"string"==typeof a.sessionCode&&0<a.sessionCode.length&&(b=b+"&sessionCode="+a.sessionCode);void 0!=a.userAgent&&"string"==typeof a.userAgent&&0<a.userAgent.length&&(b=b+"&userAgent="+a.userAgent);var e=f(d.endpoints.visit["new"].requestType,b);if(null==e)return c(!1),!1;e.send();e.onload=function(){if(200==e.status){try{var a=JSON.parse(e.responseText);d.sessionCode=
    a.data.sessionCode;d.hitCode=a.data.hitCode}catch(b){return c(e.responseText),!1}c(a)}else c(!1);return!0}};d.endVisit=function(a,c){if(!d.ready)return c(!1),!1;if(void 0===c||"function"!=typeof c)return!1;if(void 0===a||"object"!=typeof a||void 0===a.sessionCode||"string"!=typeof a.sessionCode||1>a.sessionCode.length)return c(!1),!1;var b=d.endpoints.visit.end.address,b=b+"?authToken="+d.authToken+"&trackingCode="+d.trackingCode,b=b+"&visitorCode="+d.visitorCode,b=b+"&sessionCode="+d.sessionCode,
    e=f(d.endpoints.visit.end.requestType,b);if(null==e)return c(!1),!1;e.send();e.onload=function(){d.hitCode="";d.sessionCode="";if(200==e.status){try{var a=JSON.parse(e.responseText)}catch(b){return c(e.responseText),!1}c(a)}else c(!1);return!0}};d.newEvent=function(a,c){if(!d.ready)return c(!1),!1;if(void 0===c||"function"!=typeof c)return!1;if(void 0===a||"object"!=typeof a)return c(!1),!1;var b=d.endpoints.event["new"].address,b=b+"?authToken="+d.authToken+"&trackingCode="+d.trackingCode,b=b+"&visitorCode="+
    d.visitorCode;void 0!=a.sessionCode&&"string"==typeof a.sessionCode&&0<a.sessionCode.length&&(b=b+"&sessionCode="+a.sessionCode);void 0!=a.hitCode&&"string"==typeof a.hitCode&&0<a.hitCode.length&&(b=b+"&hitCode="+a.hitCode);void 0!=a.key&&"string"==typeof a.key&&0<a.key.length&&(b=b+"&key="+a.key);void 0!=a.value&&"string"==typeof a.value&&0<a.value.length&&(b=b+"&value="+a.value);var e=f(d.endpoints.event["new"].requestType,b);if(null==e)return c(!1),!1;e.send();e.onload=function(){if(200==e.status){try{var a=
    JSON.parse(e.responseText)}catch(b){return c(e.responseText),!1}c(a)}else c(!1);return!0}};d.newHit=function(a,c){if(!d.ready)return c(!1),!1;if(void 0===c||"function"!=typeof c)return!1;if(void 0===c||"object"!=typeof a||void 0===a.sessionCode||"string"!=typeof a.sessionCode||1>a.sessionCode.length||void 0===a.pageTitle||"string"!=typeof a.pageTitle||1>a.pageTitle.length||void 0===a.path||"string"!=typeof a.path||1>a.path.length)return c(!1),!1;var b=d.endpoints.hit["new"].address,b=b+"?authToken="+
    d.authToken+"&trackingCode="+d.trackingCode,b=b+"&visitorCode="+d.visitorCode,b=b+"&sessionCode="+a.sessionCode,b=b+"&pageTitle="+a.pageTitle,b=b+"&path="+a.path;void 0!=a.hitCode&&"string"==typeof a.hitCode&&0<a.hitCode.length&&(b=b+"&hitCode="+a.hitCode);var e=f(d.endpoints.hit["new"].requestType,b);if(null==e)return c(!1),!1;e.send();e.onload=function(){if(200==e.status){try{var a=JSON.parse(e.responseText);d.hitCode=a.data.hitCode}catch(b){return c(e.responseText),!1}c(a)}else c(!1);return!0}};
    d.endHit=function(a,c){if(!d.ready)return c(!1),!1;if(void 0===c||"function"!=typeof c)return!1;if(void 0===a||"object"!=typeof a||void 0===a.sessionCode||"string"!=typeof a.sessionCode||1>a.sessionCode.length||void 0===a.hitCode||"string"!=typeof a.hitCode||1>a.hitCode.length)return c(!1),!1;var b=d.endpoints.hit.end.address,b=b+"?authToken="+d.authToken+"&trackingCode="+d.trackingCode,b=b+"&visitorCode="+d.visitorCode,b=b+"&sessionCode="+d.sessionCode,b=b+"&hitCode="+d.hitCode,e=f(d.endpoints.hit.end.requestType,
        b);if(null==e)return c(!1),!1;e.send();e.onload=function(){if(200==e.status){d.hitCode="";try{var a=JSON.parse(e.responseText)}catch(b){return c(e.responseText),!1}c(a)}else c(!1);return!0}};return d}(apiKey,trackingCode,visitorCode);