var Curio=function(g,h,k){var c={ready:!1,authToken:"",visitorCode:k,apiKey:g,trackingCode:h,sessionCode:"",hitCode:"",serverUrl:document.location.protocol+"//ttech.8digits.com/api/"};c.endpoints={auth:{requestType:"POST",address:c.serverUrl+"auth"},visit:{create:{requestType:"POST",address:c.serverUrl+"visit/create"},end:{requestType:"POST",address:c.serverUrl+"visit/end"}},event:{create:{requestType:"POST",address:c.serverUrl+"event/create"}},hit:{create:{requestType:"POST",address:c.serverUrl+
    "hit/create"},end:{requestType:"POST",address:c.serverUrl+"hit/end"}}};var f=function(a,c){var b=new XMLHttpRequest;"withCredentials"in b?b.open(a,c,!0):"undefined"!=typeof XDomainRequest?(b=new XDomainRequest,b.open(a,c)):b=null;return b};(function(){var a=f(c.endpoints.auth.requestType,c.endpoints.auth.address+"?apiKey="+this.apiKey);null!=a&&(a.onload=function(){try{var d=JSON.parse(a.responseText)}catch(b){return!1}if(void 0===d.data||"object"!=typeof d.data||void 0===d.data.authToken||"string"!=
    typeof d.data.authToken)return!1;c.authToken=d.data.authToken;return c.ready=!0},a.send())})();c.newVisit=function(a,d){if(!c.ready)return d(!1),!1;if(void 0===d||"function"!=typeof d)return!1;if(void 0===a||"object"!=typeof a)return d(!1),!1;var b=c.endpoints.visit.create.address,b=b+"?authToken="+c.authToken+"&trackingCode="+c.trackingCode,b=b+"&visitorCode="+c.visitorCode;void 0!=a.pageTitle&&"string"==typeof a.pageTitle&&0<a.pageTitle.length&&(b=b+"&pageTitle="+a.pageTitle);void 0!=a.path&&"string"==
    typeof a.path&&0<a.path.length&&(b=b+"&path="+a.path);void 0!=a.hitCode&&"string"==typeof a.hitCode&&0<a.hitCode.length&&(b=b+"&hitCode="+a.hitCode);void 0!=a.sessionCode&&"string"==typeof a.sessionCode&&0<a.sessionCode.length&&(b=b+"&sessionCode="+a.sessionCode);void 0!=a.userAgent&&"string"==typeof a.userAgent&&0<a.userAgent.length&&(b=b+"&userAgent="+a.userAgent);var e=f(c.endpoints.visit.create.requestType,b);if(null==e)return d(!1),!1;e.onload=function(){try{var a=JSON.parse(e.responseText);
    c.sessionCode=a.data.sessionCode;c.hitCode=a.data.hitCode}catch(b){return d(e.responseText),!1}d(a);return!0};e.send()};c.endVisit=function(a,d){if(!c.ready)return d(!1),!1;if(void 0===d||"function"!=typeof d)return!1;if(void 0===a||"object"!=typeof a||void 0===a.sessionCode||"string"!=typeof a.sessionCode||1>a.sessionCode.length)return d(!1),!1;var b=c.endpoints.visit.end.address,b=b+"?authToken="+c.authToken+"&trackingCode="+c.trackingCode,b=b+"&visitorCode="+c.visitorCode,b=b+"&sessionCode="+c.sessionCode,
    e=f(c.endpoints.visit.end.requestType,b);if(null==e)return d(!1),!1;e.onload=function(){c.hitCode="";c.sessionCode="";try{var a=JSON.parse(e.responseText)}catch(b){return d(e.responseText),!1}d(a);return!0};e.send()};c.newEvent=function(a,d){if(!c.ready)return d(!1),!1;if(void 0===d||"function"!=typeof d)return!1;if(void 0===a||"object"!=typeof a)return d(!1),!1;var b=c.endpoints.event.create.address,b=b+"?authToken="+c.authToken+"&trackingCode="+c.trackingCode,b=b+"&visitorCode="+c.visitorCode;void 0!=
a.sessionCode&&"string"==typeof a.sessionCode&&0<a.sessionCode.length&&(b=b+"&sessionCode="+a.sessionCode);void 0!=a.hitCode&&"string"==typeof a.hitCode&&0<a.hitCode.length&&(b=b+"&hitCode="+a.hitCode);void 0!=a.key&&"string"==typeof a.key&&0<a.key.length&&(b=b+"&key="+a.key);void 0!=a.value&&"string"==typeof a.value&&0<a.value.length&&(b=b+"&value="+a.value);var e=f(c.endpoints.event.create.requestType,b);if(null==e)return d(!1),!1;e.onload=function(){try{var a=JSON.parse(e.responseText)}catch(b){return d(e.responseText),
    !1}d(a);return!0};e.send()};c.newHit=function(a,d){if(!c.ready)return d(!1),!1;if(void 0===d||"function"!=typeof d)return!1;if(void 0===d||"object"!=typeof a||void 0===a.sessionCode||"string"!=typeof a.sessionCode||1>a.sessionCode.length||void 0===a.pageTitle||"string"!=typeof a.pageTitle||1>a.pageTitle.length||void 0===a.path||"string"!=typeof a.path||1>a.path.length)return d(!1),!1;var b=c.endpoints.hit.create.address,b=b+"?authToken="+c.authToken+"&trackingCode="+c.trackingCode,b=b+"&visitorCode="+
    c.visitorCode,b=b+"&sessionCode="+a.sessionCode,b=b+"&pageTitle="+a.pageTitle,b=b+"&path="+a.path;void 0!=a.hitCode&&"string"==typeof a.hitCode&&0<a.hitCode.length&&(b=b+"&hitCode="+a.hitCode);var e=f(c.endpoints.hit.create.requestType,b);if(null==e)return d(!1),!1;e.onload=function(){try{var a=JSON.parse(e.responseText);c.hitCode=a.data.hitCode}catch(b){return d(e.responseText),!1}d(a);return!0};e.send()};c.endHit=function(a,d){if(!c.ready)return d(!1),!1;if(void 0===d||"function"!=typeof d)return!1;
    if(void 0===a||"object"!=typeof a||void 0===a.sessionCode||"string"!=typeof a.sessionCode||1>a.sessionCode.length||void 0===a.hitCode||"string"!=typeof a.hitCode||1>a.hitCode.length)return d(!1),!1;var b=c.endpoints.hit.end.address,b=b+"?authToken="+c.authToken+"&trackingCode="+c.trackingCode,b=b+"&visitorCode="+c.visitorCode,b=b+"&sessionCode="+c.sessionCode,b=b+"&hitCode="+c.hitCode,e=f(c.endpoints.hit.end.requestType,b);if(null==e)return d(!1),!1;e.onload=function(){c.hitCode="";try{var a=JSON.parse(e.responseText)}catch(b){return d(e.responseText),
        !1}d(a);return!0};e.send()};return c}(apiKey,trackingCode,visitorCode);